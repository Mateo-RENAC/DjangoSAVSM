<table class="table table-bordered">
    <thead>
        <tr>
            <th data-column="name" style="width: 20%;">
                <div class="d-flex justify-content-between align-items-center column-header">
                    <span>
                        <a href="?search={{ search_query }}&sort=name&order={{ next_sort_order }}" class="column-link">
                            Name {% if sort_by == 'name' %}{{ sort_order|title }}{% endif %}
                        </a>
                    </span>
                </div>
            </th>
            <th data-column="reference" style="width: 20%;">
                <div class="d-flex justify-content-between align-items-center column-header">
                    <a href="?search={{ search_query }}&sort=reference&order={{ next_sort_order }}" class="column-link">
                        Reference {% if sort_by == 'reference' %}{{ sort_order|title }}{% endif %}
                    </a>
                </div>
            </th>
            <th data-column="user_name" style="width: 20%;">
                <div class="d-flex justify-content-between align-items-center column-header">
                    <a href="?search={{ search_query }}&sort=user_name&order={{ next_sort_order }}" class="column-link">
                        User Name {% if sort_by == 'user_name' %}{{ sort_order|title }}{% endif %}
                    </a>
                </div>
            </th>
            <th data-column="count" style="width: 20%;">
                <div class="d-flex justify-content-between align-items-center column-header">
                    <a href="?search={{ search_query }}&sort=count&order={{ next_sort_order }}" class="column-link">
                        Count {% if sort_by == 'count' %}{{ sort_order|title }}{% endif %}
                    </a>
                </div>
            </th>
            <th class="actions-column" style="width: 18%;">Actions
                <button class="btn btn-sm btn-custom" id="addInlineProductBtn" style="margin-left: 10px;">+</button>
            </th>
        </tr>
        <tr id="inlineProductRow" style="display: none;">
            <td><input type="text" class="form-control form-control-sm" id="inlineProductName" placeholder="Name" required style="width: 100%;"></td>
            <td><input type="text" class="form-control form-control-sm" id="inlineProductReference" placeholder="Reference" style="width: 100%;"></td>
            <td><input type="text" class="form-control form-control-sm" id="inlineProductUserName" placeholder="User Name" style="width: 100%;"></td>
            <td><input type="number" class="form-control form-control-sm" id="inlineProductCount" placeholder="Count" required style="width: 100%;"></td>
            <td>
                <button class="btn btn-sm btn-success" id="saveInlineProductBtn">Save</button>
            </td>
        </tr>
    </thead>
    <tbody id="productTableBody">
        {% for product in products %}
        <tr class="product-row">
            <td data-column="name">
                <div class="d-flex justify-content-between align-items-center">
                    <span>{{ product.name }}</span>
                    <span class="flex-grow-1"></span>
                    <span>
                        <button type="button" class="btn btn-info btn-circle" data-bs-toggle="modal" data-bs-target="#infoModal"
                                data-product-id="{{ product.id }}"
                                data-product-name="{{ product.name }}"
                                data-product-reference="{{ product.reference }}"
                                data-product-user-name="{{ product.user_name }}"
                                data-product-abbreviated-user-name="{{ product.abbreviated_user_name }}"
                                data-product-description="{{ product.description }}"
                                data-product-order-link="{{ product.order_link }}"
                                data-product-stock-count="{{ product.stock.count }}">
                            i
                        </button>
                    </span>
                </div>
            </td>
            <td data-column="reference">{{ product.reference }}</td>
            <td data-column="user_name">{{ product.user_name }}</td>
            <td data-column="count">{{ product.stock.count }}</td>
            <td class="actions-cell" style="width: 180px;">
                <a href="{% url 'product_detail' product.id %}" class="btn btn-sm btn-secondary" style="display: none;">Details</a>
                <a href="{% url 'product_edit' product.id %}" class="btn btn-sm btn-primary" style="display: none;">Edit</a>
                <a href="{% url 'product_delete' product.id %}" class="btn btn-sm btn-danger" style="display: none;" data-bs-toggle="modal" data-bs-target="#deleteModal" data-product-id="{{ product.id }}" data-product-name="{{ product.name }}">Delete</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>